======================
Creating mailing lists
======================

No Privileges Person wants to create a mailing list on Launchpad.  She first
starts by registering a team for her mailing list.

    >>> from lp.testing.layers import BaseLayer
    >>> root_url = BaseLayer.appserver_root_url()
    >>> browser = Browser('no-priv@canonical.com:test')
    >>> browser.open('%s/people/+newteam' % root_url)
    >>> browser.getControl(name='field.name').value = 'itest-one'
    >>> browser.getControl('Display Name').value = 'ITest One'
    >>> browser.getControl(name='field.membership_policy').displayValue = [
    ...     'Open Team']
    >>> browser.getControl('Create').click()
    >>> print browser.title
    ITest One in Launchpad

No Privileges Person applies for a mailing list for her new team, by
navigating to a page from the team home page.

    >>> browser.getLink('Create a mailing list').click()
    >>> browser.getControl('Create new Mailing List').click()

No further action is required for Mailman to create the mailing list.  No
Privileges Person just has to wait a little while for the mailing list to get
created.

    >>> xmlrpc_watcher.wait_for_create('itest-one')

Now the mailing list exists in Mailman.

    >>> from Mailman.Utils import list_names
    >>> sorted(name for name in list_names() if name.startswith('itest-'))
    ['itest-one']
