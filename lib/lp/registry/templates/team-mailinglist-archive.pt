<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  metal:use-macro="view/macro:page/main_only"
  i18n:domain="launchpad"
>

<head>
  <tal:block metal:fill-slot="head_epilogue">
    <tal:script condition="view/messages">
        <!--We'll add this in later, for now it's a place holder because this is where
        we bolt in the js module some day.-->
        <script type="text/javascript">
            LPS.use('lp.registry.team.mailinglists', function(Y) {
              Y.on('domready', function() {
                var config = {
                  messages: LP.cache['mail'],
                  container: Y.one('#messagelist')
                };
                var mailinglist_module = Y.lp.registry.team.mailinglists;
                var message_list = new mailinglist_module.MessageList(config);
              });
            });
        </script>
    </tal:script>
  </tal:block>
</head>

<body>
  <div metal:fill-slot="main">

    <div id="messagelist">
      <tal:comment replace="nothing">
        The json loaded and manipulated messages go here.
      </tal:comment>
      <tal:no-messages condition="not: view/messages">
      There are no messages in <tal:teamname
        replace="view/context/displayname"/>'s mail archive.
      </tal:no-messages>
    </div>

  </div>
</body>
</html>
