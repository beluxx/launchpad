
/+soft-timeout provides a way of testing if hard timeouts work in addition
to how it works in the xx-soft-timeout.txt test.

If we set soft_request_timeout to some value, the page will take
slightly longer then the soft_request_timeout value to generate, thus
causing a soft timeout to be logged.

    >>> from canonical.config import config
    >>> from textwrap import dedent
    >>> from lp.testing.fixture import CaptureOops
    >>> capture = CaptureOops()
    >>> capture.setUp()
    >>> test_data = dedent("""
    ...     [database]
    ...     db_statement_timeout: 1
    ...     soft_request_timeout: 2
    ...     """)
    >>> config.push('base_test_data', test_data)
    >>> print http(r"""
    ... GET /+soft-timeout HTTP/1.1
    ... Authorization: Basic Zm9vLmJhckBjYW5vbmljYWwuY29tOnRlc3Q=
    ... """)
    HTTP/1.1 503 Service Unavailable
    ...
    Retry-After: 900
    ...
    <title>Error: Timeout</title>
    ...

    >>> capture.oopses[0]['type']
    'RequestExpired'

    >>> capture.cleanUp()

Let's reset the config value we changed:

    >>> base_test_data = config.pop('base_test_data')

