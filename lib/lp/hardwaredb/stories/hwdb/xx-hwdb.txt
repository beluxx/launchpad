= Views for raw submission data. =

The raw submission data is listed by submitter and by system fingerprint.

== Submissions listed by person ==

The pages http://launchpad.test/~(name)/+hwdb-submissions lists the hardware
database submissions by this person.

    >>> anon_browser.open('http://launchpad.test/~name12/+hwdb-submissions')
    >>> [content_table] = find_tags_by_class(anon_browser.contents, 'listing')
    >>> print(extract_text(content_table))
    System        Date submitted  Download          Raw
    MSI MS-7369   ...             sample-submission-2.xml ...
    TONKA TUFFBOOK2600 ...        hwsubmission1.xml ...

The 'System', 'Download' and 'Raw' columns should contain valid links for that
submission. All links should resolve to valid pages, but the individual pages
are tested in detail later.

    >>> system_link = anon_browser.getLink('MSI MS-7369')
    >>> system_link.url
    'http://launchpad.test/+hwdb/+fingerprint/MSI MS-7369'
    >>> system_link.click()
    >>> anon_browser.headers['status']
    '200 Ok'
    >>> anon_browser.goBack(1)

    >>> download_link = anon_browser.getLink('sample-submission-2.xml')
    >>> download_link.url
    'http://.../sample-submission-2.xml'

    >>> raw_link = anon_browser.getLink('text')
    >>> raw_link.url
    'http://launchpad.test/+hwdb/+submission/sample-submission'
    >>> raw_link.click()
    >>> anon_browser.headers['status']
    '200 Ok'
    >>> anon_browser.goBack(1)

The owner of a submission sees a complete list of their own submissions.
They also get an additional column in the listing, showing the "private"
status of each submission.

    >>> browser = setupBrowser(auth='Basic test@canonical.com:test')
    >>> browser.open('http://launchpad.test/~name12/+hwdb-submissions')
    >>> [content_table] = find_tags_by_class(browser.contents, 'listing')
    >>> print(extract_text(content_table))
    System        Date submitted  Download          Private     Raw
    MSI MS-7369   ...             sample-submission-2.xml ...
    TONKA TUFFBOOK2600 ...        hwsubmission1.xml    no       ...

If a person has not submitted any hardware data, an according message is
displayed.

    >>> anon_browser.open('http://launchpad.test/~name16/+hwdb-submissions')
    >>> print(extract_text(find_main_content(anon_browser.contents)))
    Hardware submissions for Foo Bar...
    Foo Bar has posted no submissions.

== Viewing individual submissions ==

Individual submissions can be rendered in an RFC-822-formatted file.

    >>> browser.open(
    ...     'http://launchpad.test/+hwdb/+submission/sample-submission/+text')
    >>> print(browser.contents)
    Date-Created: 2008-09-26 17:19:18+00:00
    Date-Submitted: ...
    Format: VERSION_1
    Distribution: ubuntu
    Distribution-Series: 5.04
    Architecture: i386
    System: MSI MS-7369
    Submission URL: http://.../sample-submission-2.xml


== Submissions listed by fingerprint ==

The pages http://launchpad.test/+hwdb/+fingerprint/(fingerprint) list
all submissions for a fingerprint/system name.

    >>> anon_browser.open(
    ...     'http://launchpad.test/+hwdb/+fingerprint/MSI%20MS-7369')
    >>> [content_table] = find_tags_by_class(anon_browser.contents, 'listing')
    >>> print(extract_text(content_table))
    Date submitted     Submitted by    Download     Raw
    ...                     n/a        sample-submission-2.xml ...

A page for an unknown fingerprint displays an according message.

    >>> anon_browser.open(
    ...     'http://launchpad.test/+hwdb/+fingerprint/unknownfingerprint')
    >>> print(extract_text(find_main_content(anon_browser.contents)))
    Hardware Database submissions for a fingerprint
    Submissions for system: unknownfingerprint
    There are no submissions for this system.
